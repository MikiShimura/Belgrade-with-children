<% layout('layouts/boilerplate') -%>
<link href="/stylesheets/top-img.css" rel="stylesheet">
<link href="/stylesheets/btn.css" rel="stylesheet">

<div class="p-5 mb-4 bg-img">
    <div class="container-fluid py-5">
      <h1 class="display-5 fw-bold text-light">Explore Belgrade with small adventurers</h1>
      <p class="col-md-8 fs-4 text-light">You can't decide where to take kids this weekend?<br>
        Find wonderful destination and share the info with other parents.
      </p>
    </div>
</div>
<div class="container">
	<div class="row">
        <!-- less than sm -->
        <div class="d-block d-md-none">
            <div class="container p-4 mb-3 bg-light rounded">
                <div class="row row-cols-2">
                    <a data-bs-toggle="modal" data-bs-target="#mobileMapModal">
                        <i class="fa-solid fa-magnifying-glass"></i> Search
                    </a>
                    <a data-bs-toggle="modal" data-bs-target="#mobileMapModal">
                        <i class="fa-solid fa-map-location-dot"></i> See with map
                    </a>
                </div>
            </div>
        </div>
        <!-- more than sm -->
		<div class="col-md-3 d-none d-md-block">    <!-- 3/12 -->
			<div class="position-sticky" style="top: 2rem;">
                <div class="p-4 mb-3 bg-light rounded">
                    <h4 class="fst-italic">Search</h4>
                    <form class="d-inline" action="/places" method="GET">
                        <p class="fw-bold mb-0 mt-1">Category:</p>
                        <input class="form-check-input" type="checkbox" id="culture" name="categories" value="Culture">
                        <label class="form-check-label" for="culture">Culture</label><br>
                        <input class="form-check-input" type="checkbox" id="sport" name="categories" value="Sport">
                        <label class="form-check-label" for="sport">Sport</label><br>
                        <input class="form-check-input" type="checkbox" id="education" name="categories" value="Education">
                        <label class="form-check-label" for="education">Education</label><br>
                        <input class="form-check-input" type="checkbox" id="nature" name="categories" value="Nature">
                        <label class="form-check-label" for="nature">Nature</label><br>

                        <p class="fw-bold mb-0 mt-1">Age:</p>
                        <input class="form-check-input" type="checkbox" id="0~1" name="ages" value="0~1">
                        <label class="form-check-label" for="0~1">0~1 yrs</label><br>
                        <input class="form-check-input" type="checkbox" id="2~3" name="ages" value="2~3">
                        <label class="form-check-label" for="2~3">2~3 yrs</label><br>
                        <input class="form-check-input" type="checkbox" id="4~6" name="ages" value="4~6">
                        <label class="form-check-label" for="4~6">4~6 yrs</label><br>
                        <input class="form-check-input" type="checkbox" id="7~9" name="ages" value="7~9">
                        <label class="form-check-label" for="7~9">7~9 yrs</label><br>
                        <input class="form-check-input" type="checkbox" id="10~" name="ages" value="10~">
                        <label class="form-check-label mb-2" for="10~">10~ yrs</label><br>
                        
                        <button class="btn btn-danger mb-2">Search</button>
                    </form>
                    <form class="d-inline" action="/places" method="GET">
                        <button class="btn btn-outline-danger mb-2">Clear all</button>
                    </form>

                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#mapModal">
                        See with map
                    </button>
                </div>
            </div>
		</div>

		<div class="col-md-9">    <!-- 9/12 -->
			<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 mb-3">
				<% for (let place of places) { %> 
                    <div class="col">
                        <a href="places/<%= place._id %>" class="text-decoration-none">
                        <div class="card h-100">
                            <img src="<%= place.images[0].url %>" class="card-img-top" style="height:15vw; object-fit:cover;" alt="...">
                            <div class="card-body">
                                <h5 class="card-title text-body"><%= place.title %></h5>
                                <% if(place.category === "Culture") { %> 
                                    <p class="card-text"><span class="badge rounded-pill bg-primary"><%= place.category %></span></p>
                                <% }else if (place.category === "Sport") { %>
                                    <p class="card-text"><span class="badge rounded-pill bg-success"><%= place.category %></span></p>
                                <% }else if (place.category === "Education") { %>
                                    <p class="card-text"><span class="badge rounded-pill bg-danger"><%= place.category %></span></p>
                                <% }else if (place.category === "Nature") { %>
                                    <p class="card-text"><span class="badge rounded-pill bg-warning"><%= place.category %></span></p>
                                <% } %>
                                <p class="card-text">
                                    <% for (let age of place.ages) { %> 
                                        <span class="badge bg-secondary"><%= age %></span>
                                    <% } %>
                                </p>
                                <!-- <a href="places/<%= place._id %>">For detail</a> -->
                            </div>
                        </div>
                        </a>
                    </div>
                <% } %> 
			</div>
		</div>
	</div>
</div>

<%- include("modals") %>

<script>
    const mapToken = "<%= process.env.MAPBOX_TOKEN %>"
    const places = <%- JSON.stringify(places) %>
</script>
<script src="/javascripts/indexMap.js"></script>
